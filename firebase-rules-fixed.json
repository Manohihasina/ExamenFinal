{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    
    "cars": {
      "$carId": {
        ".read": "auth != null",
        ".write": "auth != null"
      }
    },
    
    "interventions": {
      ".indexOn": ["id", "is_active"],
      "$interventionId": {
        ".read": "auth != null",
        ".write": "auth != null"
      }
    },
    
    "repairs": {
      "$repairId": {
        ".read": "auth != null",
        ".write": "auth != null",
        ".validate": {
          "status": "newData.isString() && newData.val().length > 0",
          "interventionDuration": "newData.isNumber() && newData.val() > 0"
        }
      }
    },
    
    "repair_slots": {
      "$slotId": {
        ".read": "auth != null",
        ".write": "auth != null"
      }
    },
    
    "users": {
      "$userId": {
        ".read": "auth != null && ($userId === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')",
        ".write": "auth != null && ($userId === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')"
      }
    }
  }
}
